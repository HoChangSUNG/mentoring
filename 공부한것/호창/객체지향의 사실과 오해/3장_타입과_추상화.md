# 3장 타입과 추상화

## 추상화를 통한 복잡성 극복

- 추상화는 현실에서 출발하되 불필요한 부분을 도려내가면서 사물의 놀라운 본질을 드러나게 하는 과정
- 추상화의 목적은 불필요한 부분은 무시함으로써 **현실에 존재하는 복잡성을 극복**하는 것
- 예) 지하철 노선도는 각 역 간의 거리, 지형적인 특징이 필요한 것이 아니라, 역 간의 연결성이 중요 → 역 간의 연결성이라는 추상화 목적에 부합하기만 하면 됨(지형적인 특징은 무시)

### 추상화란?

- 어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법
- 복잡성을 다루기 위해 **추상화는 두 차원**에서 이루어짐
    - 첫 번째 차원 : 구체적인 사물들 간 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것
    - 두 번째 차원 : 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것
- **추상화의 목적**은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것

→ 객체지향 패러다임은 객체라는 추상화를 통해 현실의 복잡성을 극복

<br>
<br>

## 객체지향과 추상화

### 모두 트럼프일 뿐

- 앨리스가 정원 입구에 들어가자 정원사들, 병사들, 왕자와 공주, 하객으로 참석한 왕과 왕비들, 하트 왕과 하트 여왕, 하얀 토끼를 보았다.
- 또한 앨리스는 하얀 토끼를 제외한 것들을 기껏해야 “트럼프에 불과해” 라고 읊조렸다
- 이를 통해 앨리스는 정원에 서 있는 다양한 인물들을 계급, 나이, 성격 등의 차이점은 무시하고 **트럼프라는 공통점을 기반으로 추상화**해서 바라보고 있다.

### 그룹으로 나누어 단순화하기

- 결과적으로 앨리스는 정원에 있는 인물들을 **트럼프, 토끼 그룹**으로 나누어버렸다.

### 개념

- 개념 : **공통점을 기반으로 객체들을 묶기 위한 그릇(공통점을 기반으로 분류할 수 있음) → 특정한 객체가 어떤 그룹에 속할 것인지를 결정**
    - 개념을 이용하면 객체를 여러 그룹으로 **분류**할 수 있음
    - 앨리스는 몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려있는 객체를 트럼프라는 개념으로 추상화함
    - 이처럼 트럼프와 토끼라는 두 개의 개념으로 나누고 두 개념에 적합한 객체가 각 그룹(토끼, 트럼프)에 포함되도록 분류함.
- 인스턴스 : 객체에 어떤 개념을 적용하는 것이 가능해서 개념 그룹의 일원이 될 때 객체를 그 개념의 인스턴스라고 부름
    - 하트 여왕은 **트럼프**라는 개념 그룹의 일원, 하얀 토끼는 **토끼**라는 개념 그룹의 일원
    
- **객체 : 특정한 개념을 적용할 수 있는 구체적인 사물**
- **인스턴스 : 개념이 객체에 적용됐을 때 객체를 개념의 인스턴스라고 부름**

### 개념의 세 가지 관점

- **객체의 분류 장치로서 개념**을 이야기할 때 세 가지 관점을 포함하여 이야기 함
    - 심볼(symbol) : 개념을 가리키는 간략한 이름이나 명칭
    - 내연(intension) : 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인
    - 외연(extension) : 개념에 속하는 모든 객체의 집합(set)
    
- 앨리스 이야기에서 트럼프라는 개념의 심볼, 내연, 외연을 표현한 예시
    - 심볼 : 트럼프
    - 내연 :  몸이 납작하고 두 손과 두 발은 네모 귀퉁이에 달려 있는 등장인물
    - 외연 : 정원사, 병사, 신하, 왕자와 공주, 하객으로 참석한 왕과 왕비들, 하트 잭, 하트 왕과 하트 여왕

**심볼**

- 개념을 가리키는 이름

**내연**

- 개념의 의미 → 개념을 객체에게 적용할 수 있는지 여부를 판단하기 위한 조건
    - 앨리스 이야기에서 몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려 있다는 것이 트럼프라는 설명이 바로 내연
    - 하얀 토끼는 트럼프의 내연을 만족시키지 못해 트럼프가 될 수 없음

**외연**

- 개념에 속하는 객체들, 즉 개념의 인스턴스들이 모여 이뤄진 집합
    - 앨리스 이야기에서는 정원사, 병사, 신하, 왕자와 공주 … 하트 왕과 하트 여왕이 모두 트럼프의 외연을 구성하는 객체 집합

### 객체를 분류하기 위한 틀

- 개념이 심볼, 내연, 외연으로 구성돼 있다는 사실보다 개념을 이용해 객체를 분류할 수 있다는 사실이 더 중요 → 개념을 이용해 공통점을 가진 객체들을 분류할 수 있다는 아이디어가 객체지향 패러다임이 복잡성을 극복하는 데 사용하는 가장 기본적인 인지수단이기 때문
- 어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정한다. → 객체를 적절한 개념에 따라 분류하지 모샇면 유지보수가 어렵고 변화에 쉽게 대처하지 못함
    - 더 중요한 것은 적절한 분류 체계는 애플리케이션을 다루는 개발자의 머릿속에 객체를 쉽게 찾고 조작할 수 있는 정신적인 지도를 제공한다는 것

**분류**

- 객체에 특정한 개념을 적용하는 작업
- 객체에 특정한 개념을 적용하기로 결심했을 때 우리는 그 객체를 특정한 집합의 멤버로 분류하고 있는 것이다.

### 분류는 추상화를 위한 도구다

- 개념을 통해 객체를 분류하는 과정 → 추상화의 두가지 차원을 모두 사용
    - 공통점을 취하고 차이점을 버리는 일반화를 통해 단순화하는 것 → 정원사, 병사, 하트 왕과 하트 여왕을 트럼프라는 개념으로 묶은 것은 개별 객체 간의 차이점을 무시하고 공통점을 취한 결과 → 일반화
    - 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거해 단순화하는 것 → 트럼프에 속하는 객체의 공통점 중에서도 몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려 있다는 공통점에만 집중 → 불필요한 세부 사항 제거
- 개념은 객체들의 복잡성을 극복하기 위한 추상화 도구

<br>
<br>


## 타입

### 타입은 개념이다

- **타입은 개념과 동일**
- **타입 : 공통점을 기반으로 객체들을 묶기 위한 틀**
    - 개념과 마찬가지로 **심볼, 내연, 외연**으로 구성되며, 타입에 속하는 객체 역시 **타입의 인스턴스**라고 함

### 데이터 타입

- 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터이다.
- 데이터에 대한 분류는 암시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다.

**타입과 관련해 중요한 사실 2가지**

1. 타입은 데이터가 어떻게 사용되느냐에 관한 것이다.
    - 어떤 데이터에 어떤 연산자를 적용할 수 있느냐가 그 데이터의 타입을 결정한다는 점이 중요
        - 데이터를 이용해 수행할 수 있는 작업을 연산자라고 하고, 예를 들어 숫자형 데이터에는 +,-,/,* 를 적용할 수 있지만, 문자열에는 +만 적용이 가능
2. 타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰진다.
    - 개발자가 데이터 타입을 사용하기 위해 단지 데이터 타입에 적용할 수 있는 연산자만 알고 있으면 됨 → 숫자형 데이터에 적용할 수 있는 산술 연산자를 알고 있으면, 메모리 내부에 숫자가 어떤 방식으로 저장되었는지 몰라도 숫자형 데이터를 사용할 수 있음

### 객체와 타입

- 전통적인 데이터 타입과 객체지향의 타입 사이에 깊은 연관성이 있음 → 객체를 일종의 데이터처럼 사용
- **객체가 협력을 위해 어떤 책임을 지녀야 하는지를 결정하는 것이 객체지향 설계의 핵심**
- 위에서 말한 두 가지 조언은 객체의 타입을 이야기할 때도 동일하게 적용
    1. 어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 객체가 수행하는 행동이다.
    2. 객체의 내부적인 표현은 외부로부터 철저하게 감춰진다.

### **행동이 우선이다**

- 위 두개의 조언을 통해 객체의 내부 표현 방식이 다르더라도 어떤 객체들이 동일하게 행동한다면 그 객체들은 동일한 타입에 속한다.
- 결과적으로 **동일한 책임을 수행하는 일련의 객체는 동일한 타입에 속한다**고 말할 수 있다.
- 즉, 객**체의 타입을 결정하는 것은 객체의 행동뿐이고, 객체가 어떤 데이터를 보유하고 있는지는 타입을 결정하는 데 아무런 영향도 미치지 않는다.**

**같은 타입에 속한 객체는 행동만 동일하다면 서로 다른 데이터를 가질 수 있다**

- 동일한 행동 → 동일한 책임 → **동일한 메시지 수신**을 의미
    
    따라서 동일한 타입에 속한 객체는 내부의 데이터 표현 방식이 다르더라도 동일한 메시지를 수신하고 이를 처리할 수 있음, 하지만 내부 표현 방식이 다르기 때문에 동일한 메시지를 처리하는 방식은 서로 다를 수 밖에 없음
    
    → 다형성에 의미를 부여
    
- **다형성 : 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력**
    - **동일한 메시지를 서로 다른 방식으로 처리하기 위해서는 객체들은 동일한 메시지를 수신할 수 있어야 하기 때문에 결과적으로 다형적인 객체들은 동일한 타입(또는 타입 계층)에 속하게 됨**
    

**데이터의 내부 표현 방식과 무관하게 행동만이 고려 대상이라는 사실**

- 외부에 데이터를 감춰야 한다는 것을 의미 → 훌륭한 객체지향 설계에서는 외부에 행동만을 제공하고 데이터는 행동 뒤로 감춰야 함 → 이 원칙을 흔히 캡슐화라고 함
- 공용 인터페이스 뒤로 데이터를 캡슐화하라는 격언 → 객체를 행동에 따라 분류하기 위해서 지켜야 하는 기본적인 원칙

<br>
<br>


## 타입의 계층

### 일반화/특수화 관계

- 객체 지향에서 일반화/특수화 관계를 결정하는 것은 **객체의 상태를 표현하는 데이터가 아니라 행동이라는 것**
    
    → 어떤 객체가 다른 객체보다 더 일반적인 상태 혹은 특수한 상태를 표현한다고 해서 두 객체가 속하는 타입 간 일반화/특수화 관계가 성립하는 것이 아님
    
- **두 타입 간 일반화/특수화 관계가 성립하려면 한 타입이 다른 타입보다 특수하게 행동해야 하고, 반대로 한 타입은 다른 타입보다 일반적으로 행동해야 함**

**행동의 관점에서 일반적인 타입, 더 특수한 타입이란 무엇인가?**

- **일반적인 타입**이란 특수한 타입이 가진 모든 행동들 중 일부 행동만을 가지는 타입을 가리킴 → 특수한 타입보다 더 적은 수의 행동을 가짐
- **특수한 타입**이란 일반적인 타입이 가진 모든 행동을 포함하지만 거기에 더해 자신만의 행동을 추가하는 타입을 가리킴 → 일반적인 타입보다 더 많은 수의 행동을 가짐
- 예시)
    - 트럼프가 트럼프 인간의 일반화인 이유 → 트럼프가 가진 모든 행동을 트럼프 인간이 공통적으로 수행할  수 있기 때문
    - 트럼프 인간이 트럼프의 특수화인 이유 → 트럼프가 가진 모든 행동을 수행하고, 자신에게만 특수화된 행동을 추가적으로 할 수 있기 때문
    

결국 일반화/특수화는 행동에 관한 것

일반적인 타입은 특수한 타입에 비해 더 적은 수의 행동을 가지며 특수한 타입은 일반적인 타입에 비해 더 많은 행동을 가짐

단, 특수한 타입은 일반적인 타입이 할 수 있는 모든 행동을 동일하게 수행해야 함

주의할 점은 타입의 내연을 의미하는 행동의 가짓수와 외연을 의미하는 집합의 크기는 서로 반대라는 사실 → 일반적인 타입은 특수한 타입보다 외연의 크기는 더 크고 행동의 수는 더 적다.

### 슈퍼타입과 서브타입

- 일반적인 타입 → 슈퍼 타입
- 특수한 타입 → 서브 타입
- 슈퍼타입과 서브타입에서 중요한 것은 두 타입 간의 관계가 행동에 의해 결정된다는 점 → **즉, 어떤 타입이 다른 타입의 서브타입이 되기 위해서는 행위적 호환성을 만족**해야 함
    
    **일반적으로 서브 타입은 슈퍼타입의 행위와 호환되기 때문에 서브 타입은 슈퍼타입으로 대체될 수 있어야 함** → **어떤 타입을 다른 타입의 서브 타입이라고 말할 수 있으려면 다른 타입으로 대체될 수 있어야 한다(리스코프 치환 원칙)**
    

<br>
<br>


## 정적 모델

### 타입의 목적

- 타입을 사용하는 이유는 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문
- 예시
    - 타입은 시간에 따라 동적으로 변하는 앨리스의 상태(키)를 시간과 무관한 정적인 모습으로 다룰 수 있게 해줌 → 키가 100cm, 80cm 가 될 수 있다는 사실은 뒤로 미루고, 단지 앨리스가 변경되는 키라는 상태를 가진다고 단순화
    - 결국 타입은 앨리스의 상태에 복잡성을 부과하는 시간이라는 요소를 제거하여 시간에 독립적인 정적인 모습으로 앨리스를 생각할 수 있게 해준다.
    

### 그래서 결국 타입은 추상화이다

- 어떤 시점에 앨리스에 관해 생각할 때 불필요한 시간이라는 요소와 상태 변화라는 요소를 제거하고 정적인 관점에서 엘리스의 모습을 묘사하는 것을 가능하게 해줌 → 이런 관점에서 타입은 추상화이다.
- 타입을 이용하면 객체의 동적인 특성을 추상화할 수 있고, 결국 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화할 수 있는 효과적인 방법

### 동적 모델과 정적 모델

동적 모델 

- 스냅샷처럼 실제로 객체가 살아 움직이는 동안 상태가 어떠헤 변하고 어떻게 행동하는지를 포착하는 것
    - 객체의 스냅샷 : 객체가 특점 시점에 구체적으로 어떤 상태를 가지는지

정적 모델 = 타입 모델

- 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것
- 동적으로 변하는 객체의 상태가 아니라 객체가 속한 타입의 정적인 모습을 표현하기 때문에 정적 모델이라고도 함

### 클래스

- **타입(=개념)은 객체를 분류하기 위해 사용되는 개념**이고, **타입을 나누는 기준은 객체가 수행하는 행동**이다.
- **클래스는 단지 타입을 구현하는 메커니즘 중 하나일 뿐**이다.
- 결국 **객체지향에서 중요한 것**은 동적으로 변하는 **객체의 상태**와 상태를 변경하는 **행위**이다.
