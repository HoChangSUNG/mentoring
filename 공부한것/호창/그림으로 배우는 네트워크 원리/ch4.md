# Ch4 웹사이트의 동작 원리

### URL

- 전송받고 싶은 웹사이트 주소(전송받고 싶은 웹서버와 그 파일)
- 형식  
    ![KakaoTalk_20230901_131554279](https://github.com/HoChangSUNG/mentoring/assets/76422685/3bde3784-96cd-4b34-9e68-afa4515339ba)
    
    - 스킴 : 웹브라우저가 웹 서버의 데이터에 접속하기 위한 프로토콜
        - 보통 https, https나 ftp 등을 이용하기도 함
    - 호스트명
        - 웹서버 접속 시 호스트명에서 IP주소로 변환하는 DNS의 이름 해석 필요
    - 경로명
        - 웹서버 어디에 목적으로 하는 파일이 있는지 나타내는 경로

### HTTP 리퀘스트

- **리퀘스트 라인, 메시지 헤더, 엔티티 바디로 구성**
- 리퀘스트 라인 : 메소드, URI, 버전으로 구성
- 메시지 헤더 : 웹브라우저 ㅈ오류와 버전, 대응하는 데이터 형식 등의 정보 기술
- 엔티티 바디 : POST 메소드로 웹브라우저에서 데이터를 보낼 때 사용

### **HTTP 리스폰스**

- **리스폰스 라인, 메시지 헤더, 엔티티 바디로 구성**
- 리스폰스 라인 : 버전(HTTP 버전), 상태 코드(리퀘스트 처리 결과), 설명문(상태 코드의 의미를 간단히 보여주는 텍스트)
- 메시지 헤더 : WAS가 자세한 정보를 웹브라우저에 전달하기 위해 사용, EX) 데이터 형식, 갱신 날짜 등
- 엔티티 바디 : 웹 브라우저에 보내는 데이터, 주로 HTML 파일

### 프록시 서버

- 웹사이트의 접속을 대행하는 서버
- 프록시 서버를 경유하는 웹 접속 진행 순서
    1. 클라이언트PC의 웹 브라우저에서 URL을 입력하면, 프록시 서버로 HTTP 리퀘스트를 보냄
    2. 프록시 서버에서 URL로 지정된 웹서버에 HTTP 리퀘스트를 보냄
    3. 웹서버에서 프록시 서버로 HTTP 리스폰스를 보냄
    4. 프록시 서버에서 클라이언트 PC의 웹 브라우저로 HTTP 리스폰스를 보냄
- 종류
    - 포워드 프록시  
        ![Untitled (1)](https://github.com/HoChangSUNG/mentoring/assets/76422685/3bf0fae1-b94b-4af2-a0bf-9045f985db08)
        
        - 클라이언트에서 요청을 할 때 직접 요청하는 것이 아닌 프록시 서버를 거치는 방식
        - 클라이언트 측에 프록시 서버를 위치시키는 것
        - 서버가 어떤 클라이언트가 요청했는지 알 수 없다.
    - 리버스 프록시
        
        ![Untitled (2)](https://github.com/HoChangSUNG/mentoring/assets/76422685/8db627ff-4817-45d9-a75a-64b7f408a16c)

        - 서버에서 클라이언트 직접 데이터를 전달하지 않고 프록시 서버를 거치는 방식
        - 서버 측에 프록시 서버를 위치시키는 것
        - 서버의 정보를 숨기는 역할을 하며 클라이언트는 서버의 주소를 알 수 없다.
        
- 프록시 서버 사용 이유
    - 캐싱을 하기 위함
        - 캐시 서버를 사용하여 실제 서버의 부하를 낮출 수 있기 때문 → 캐시 서버에 있는 데이터 요청 시 실제 서버로 데이터 요청을 할 필요가 없어 트래픽을 감소시키고 병목 현상 줄일 수 있음
    - 보안상의 이점 때문
        - 외부에서 서버에 접속할 때 프록시 서버를 통해 접속되기 때문에 서버의 IP를 숨기는 것이 가능하고 이는 외부로부터 위험을 막아주는 역할
    

### 웹사이트를 볼 때 동작

1. 웹브라우저에서 URL을 입력
2. URL에 포함된 웹서버의 호스트명을 DNS 서버에 질의해 웹서버의 IP 주소를 해석
    - DNS 서버에 질의할 때 DNS 서버의 MAC 주소(호스트의 목적지 MAC 주소 때문)를 구하기 위해 ARP 실행
3. 웹서버의 IP 주소를 알면 웹브라우저와 WAS간 TCP 커넥션 맺음
4. TCP 커넥션 맺은 후, HTTP 리퀘스트, HTTP 리스폰스 주고받음  
  ![1](https://github.com/HoChangSUNG/mentoring/assets/76422685/825ef164-86dc-487b-b267-ec834fefcb88)
 ![2](https://github.com/HoChangSUNG/mentoring/assets/76422685/8de9f1ad-931f-4e09-adb5-e6b63d1c79ce)
