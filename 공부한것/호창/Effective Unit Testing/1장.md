# 1장 좋은 테스트의 약속

### 테스트 선행 방식

- 자동화된 테스트를 단순한 오류 예방 목적뿐만 아니라, 코딩 전에 그 코드에 기대하는 동작을 정의하는 설계 보조 수단으로까지 활용해야 함
- 구현까지 끝나야 검증을 시작하는 것이 아니라 애초에 설계부터 검증하고 들어가는 것

<Br>
<Br>

### 테스트의 가치

- 테스트는 실수를 바로잡아줄 수 있다
- 오류 수정에 쏟는 시간이 늘어난 것도 아닌데 미해결 결함의 수가 줄어들고 테스트가 팀의 작업 품질에 가시적인 영향을 줌

  **그렇기 때문에 테스트 코드 커버리지를 100%를 달성하는 것이 중요할까?**

    - 아니다

      애플리케이션 동작이 올바른가와 상관없이, 그저 모든 코드를 한번씩 실행해보았다고 보장할 뿐이기 때문에 커버리지에 강박관념을 버리고 의미있는 테스트 를 작성하는데 집중해야 함



- 테스트 수가 많아질수록 새로 추가한 테스트의 가치가 떨어지는 이유
    - 개발자는 일반적으로 가장 핵심적인(가장 중요하고 위험 부담이 큰) 코드를 먼저 검사하기 때문

      그와 달리 대부분의 테스트를 작성한 후에도 확인하지 않은 코드는 십중팔구 가장 사소하고 문제될 소지가 적은 부분이다.

- 수확 체감
    - 테스트 커버리지가 100%에 근접할수록 테스트를 더 작성해야 하는가에 대해서 확신이 줄어드는 것
        - 작성할 테스트를 거의 다 작성했다면 나머지 코드에서 문제가 발견될 가능성은 낮아지기 때문이다.
- 생산성에 영향을 주는 요소
    - 피드백 주기
    - 디버깅 시간
    - 신뢰성
    - 안정성
    - 테스트 코드는 위 요소들에 영향을 미쳐 생산성에 직간접적인 영향을 줌

- **테스트의 두 가지 가치 (고지)**
    1. 테스트를  **품질** 보증 수단으로 보는 품질 고지 → 단지 테스트만 작성해서 얻을 수 있는 가치, **테스트를 갖춰야 하는 이유**
    2. 테스트를 코드를 **설계**하는 방식으로 보는 설계 고지 → 테스트를 설계 도구로 인식 ,**좋은 테스트를 갖춰야 하는 이유**
- **테스트의 두 가지 가치를 전부 끌어내고 정복하기 위해서는??**
    - 테스트 코드도 제품 코드를 다루듯 하라. 믿고 의지할 수 있을 만큼 철저하게 리팩토링하고 높은 품질을 유지하라
    - 테스트를 제품 코드가 목적과 쓰임새에 적합한 구조가 되게끔 이끌어주는 설계 수단으로 활용하라.
- 단지 테스트만 작성해서 얻을 수 있는 가치의 한계점을 뛰어넘기 위해서는??(품질 고지 → 설계고지)
    - 실수가 반복되는 것을 예방한다는, 방어적이고 검증 지향적인 가치가 아닌, 더 창조적이고 설계 지향적인 가치로 사고의 틀의 바꾸어야 한다
      
    <Br>
      <Br>

### TDD

- 자동화된 테스트를 설계 수단으로 이용
- 설계→코딩→테스트 순서가 **테스트 → 코딩 → 설계(리팩토링)** 순으로 바뀐다.
- 실패하는 테스트 작성하기  → 테스트 통과하기 → 중복을 줄이고 의도를 명확하게 하기 위한 코드 리팩토링을 반복
- 테스트 먼저 작성시 테스트로 설계한 제품 코드가 만들어지는데, 이것의 장점
    1. 사용 가능한 코드가 만들어진다 → 제품 코드의 설계와 API가 활용 시나리오에 적합한 모습으로 거듭난다.
    2. 코드가 가벼워진다 → 실제로 활용할 시나리오에는 요구하는 기능만을 담게 된다.
- TDD가 어떻게 우발적 복잡성을 줄여주는가?
    - 결함이나 빠진 기능을 명시하는 테스트, 테스트를 통과할 만큼의 코드만 작성한다는 규칙. 그리고 간결한 설계를 지향하는 철저한 리팩토링이 우발적 복잡성을 크게 줄여줌
    - 우발적 복잡성
        - 쓸데없이 복잡한 것, 요구 조건은 그대로 만족하면서도 더 단순한 설계로 대체할 수 있다는 뜻
        - 설계가 복잡해질수록 비생산적이다. → 우발적 복잡성은 비생산적이다.
        - 
          <Br>
          <Br>

### **BDD(행위 주도 개발, Behavior-driven development)**

- 생각의 초점을 테스트에서 행위로 옮겨 테스트 케이스 자체가 요구사양이 되도록 하는 개발 방법, TDD 기반 방법론
- TDD에서 테스트가 들어가야 할 자리를 행위로 바꿔 사용
- 테스트의 이름은 검사하려는 행위를 기술한 문장, 테스트할 범위는 한 문장으로 기술할 수 있는 만큼의 행위