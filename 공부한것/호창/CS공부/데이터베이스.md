### 후보키, 기본키, 대체키, 외래키, 슈퍼키

후보키 : tuple을 유일하게 식별하기 위해 사용하는 속성들의 부분 집합이고 유일성과 최소성을 만족해야 한다.

- 유일성 : key 하나로  하나의 tuple을 유일하게 식별할 수 있어야 함
- 최소성 : 꼭 필요한 속성으로만 구성

기본키: 후보키 중 선택한 Main Key이고 null값을 가질수 없고 동일한 값이 중복될 수 없다는 특징이 있다.

대체키 : 후보키 중 기본키를 제외한 나머지 키

슈퍼키 : 유일성은 만족하지만 최소성을 만족하지 못하는 키

외래키 : 다른 릴레이션의 기본키를 그대로 참조하는 속성의 집합

<br>
<br>

### 인덱스를 사용하는 이유와 장단점

**인덱스**란 추가적인 쓰기 작업과 저장공간을 활용하여 데이터 베이스 테이블의 검색 속도를 향상시키기 위한 자료구조이다

**인덱스를 사용하는 이유**는 쿼리의 성능을 향상시키기 위함이다.

**인덱스의 장점**은 테이블을 조회하는 속도를 향상시킬 수 있다.

**인덱스의 단점**은 인덱스를 관리하기 위한 추가적인 저장공간이 필요하고, 인덱스를 잘못 사용하면 성능이 오히려 저하되는 역효과가 발생할 수 있다.

- DML이 빈번한 컬럼에 인덱스를 걸면 인덱스의 크기가 비대해져서 성능이 오히려 저하되는 역효과 발생한다
    
    UPDATE의 경우 기존의 인덱스를 사용하지 않음으로 처리하고, 갱신된 데이터에 대해 인덱스를 추가하여 SQL문 처리 시 비대해진 인덱스에 의해 오히려 성능이 떨어지게 된다.
    

<br>
<br>


### 트랜잭션이란?

**트랜잭션**이란 데이터베이스의 상태를 변환시키는 하나의 논리적인 작업 단위를 구성하는 연산들의 집합이다.

또한 하나의 트랜잭션은 commit 되거나 rollback된다.

**commit** 은 트랜잭션 작업이 성공하여 트랜잭션 안의 작업 내용(INSERT, UPDATE, DELETE)을 DB에 반영하도록 한다.

**rollback**은 트랜잭션 작업이 비정상적으로 종료되어 트랜잭션 안의 작업 내용을 DB에 반영하지 않도록 한다.

<br>
<br>


### 트랜잭션 상태에는 무엇이 있는가?

![스크린샷 2023-11-30 오후 4 46 38](https://github.com/HoChangSUNG/mentoring/assets/76422685/1ee29430-d88d-49c9-ab1e-7e3d7e60c07a)

**트랜잭션 상태**에는 활동(Active), 실패(Failed), 철회(Aborted), 부분 완료(partially Committed), 완료(Commited)가 존재한다.

**활동**은 트랜잭션이 실행중에 있는 상태, 연산들이 정상적으로 실행 중인 상태를 말한다.

**실패**는 트랜잭션 실행에 오류가 발생하여 중단된 상태를 말한다.

**철회**는 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태를 말한다.

**부분 완료**는 트랜잭션이 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태를 말한다.

**완료**는 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태를 말한다.

<br>
<br>


### ACID

ACID는 데이터베이스에서 트랜잭션이 안전하게 수행되는 것을 보장하기 위해 필요한 4가지 성질이다.

ACID는 **Automicity(원자성), Consistency(일관성), Isolation(격리성), Durability(지속성)**가 있다.

**원자성**은 하나의 트랜잭션 연산은 모두 성공하거나 실패해야 하는 특성이다.

예를 들어 A계좌에서 출금, B계좌에서 입금 시 출금과 입금이 모두 되거나 되지 않아야 합니다.

**일관성**은 트랜잭션 실행 기준으로 전, 후에 일관된 데이터베이스 상태를 보존해야 하는 특성이다.

**격리성**은 트랜잭션 실행 도중 연산의 중간 결과에 다른 트랜잭션이 접근 불가능하도록 하는 특성이다.

격리 정도에 따라 Isolation Level로 분류할 수 있다.

**지속성**은 트랜잭션 실행이 완료된 트랜잭션 결과는 영속적으로 데이터베이스에 저장하는 특성이다.

<br>
<br>


### 트랜잭션 격리 수준

트랜잭션 격리 수준이란 여러 트랜잭션이 동시에 처리될 때, 특정 트랜잭션이 다른 트랜잭션에서 변경하거나 조회하는 데이터를 볼 수 있게 허용할지 여부를 결정하는 것

격리 수준이 높은 순서대로 **SERIALIZABLE, REPEATABLE READ, READ COMMITED, READ UNCOMMITED**가 존재한다.

**READ UNCOMMITED**

- **트랜잭션에서 변경된 내용이 커밋되지 않더라도 다른 트랜잭션에서 읽을 수 있다.**
    
    이로 인해 Dirty Read, Non-Repeatable Read, Phantom Read와 같은 이상현상 발생 가능
    
    데이터 정합성이 보장되지 않는다
    

**READ COMMITED**

- 트랜잭션이 커밋된 데이터만 다른 트랜잭션에서 읽을 수 있다.
    
    Dirty Read는 방지 가능하지만, Non-Repeatable Read, Phantom Read는 여전히 발생 가능
    

**REPEATABLE READ**

- 트랜잭션 내에서 같은 쿼리를 실행하면 항상 동일한 결과가 나온다.
    
    Non-Repeatable Read는 방지할 수 있지만 여전히 Phantom Read는 발생 가능
    

**SERIALIZABLE**

- 모든 트랜잭션들이 직렬화되어 실행된다.
    
    Dirty Read, Non-Repeatable Read, Phantom Read 모두 발생하지 않음
    

<br>
<br>


### Dirty Read, Non-Repeatable Read, Phantom Read란?

**Dirty Read**란 다른 트랜잭션에 의해 수정됐지만 아직 커밋되지 않은 데이터를 읽는 것을 말한다.

**Non-Repeatable Read**란 한 트랜잭션 내에서 같은 Key를 가진 Row를 두 번 읽었는데 그 사이에 값이 변경되거나 삭제되어 결과가 다르게 나타나는 현상이다.

**Phantom Read**란 한 트랜잭션 내에서 같은 쿼리를 두 번 수행했는데, 첫 번째 쿼리에서 없던 유령(Phantom) 레코드가 두 번째 쿼리에서 나타나는 현상을 말한다.

<br>
<br>


### 정규화란?

정규화란 데이터베이스에서 중복을 최소화하기 위해 데이터를 분해하는 작업을 말한다.

정규화를 하여 중복으로 인한 이상현상을 방지할 수 있다는 장점이 있고, 릴레이션간 조인 연산이 많아질 수 있다는 단점이 있다.

<br>
<br>


### 반정규화란?

반정규화란 의도적으로 데이터의 중복을 허용하고, 데이터를 합치는 것을 말한다.

장점은 조인 비용이 줄어 빠른 데이터 조회가 가능하고, 조인할 테이블이 줄어들어 데이터 조회 쿼리가 간단해진다

단점으로는 데이터 간의 일관성이 깨질 수 있고, 데이터를 중복하여 저장하므로 더 많은 저장 공간이 필요하다.

<br>
<br>

### RDBMS와 NOSQL의 차이

RDBMS는 관계를 맺고 모여있는 2차원 형태의 테이블들의 집합체이고 테이블 간의 관계에서 서로의 컬럼을 기준으로 join이 가능하다는게 rdbms의 특징이다.

NOSQL(Not Only Sql)은 관계형 데이터베이스로서 RDB형태의 관계형 데이터베이스가 아닌 다른 형태의 데이터 저장 기술이다.

RDB는 Transaction과 정합성에 초점이 맞춰진 데이터베이스라면 NoSQL은 고속의 읽기와 쓰기가 가능하고 분산처리에 뛰어나다는 점이 다르다.
