# CHAPTER15-16

# CHAPTER 15 웹 어플리케이션의 일반적인 구성 및 방명록 구현

### 웹 어플리케이션 주요 요소
![KakaoTalk_20230808_174051839](https://github.com/HoChangSUNG/mentoring/assets/76422685/161aec1d-8f3d-4458-a939-003247a1d48e)

- Service 클래스 : 사용자의 요청을 처리하는 기능 제공, 기능 제공하기 위한 로직을 구현하며 DAO 클래스를 이용해 DB연동을 처리
- DAO 클래스 : 데이터에 접근할 때 사용하는 객체를 위한 클래스, DB 관련 쿼리 실행
- 뷰(JSP) : Service 클래스가 실행한 결과를 화면에 출력, Service가 기능을 수행하는데 필요한 데이터를 전달
- MVC 프레임워크 : 사용자의 요청을 Service에 전달하고 Service의 실행 결과를 뷰에 전달

**DAO에서 Connection 접근 방법 3가지**

- **DAO 클래스의 메서드에서 직접 Connection 생성**
    - 메서드 실행할 때마다 connection 생성해서 여러 메소드를 하나의 트랜잭션으로 처리할 수가 없는 문제 존재
        
        (jdbc 기반 트랜잭션은 하나의 Connection 객체에서만 유효하기 때문)
        
- **DAO 객체를 생성할 때 생성자로 Connection을 전달**
    - 여러 개의 메소드를 하나의 트랜잭션으로 처리할 수 있지만, 매번 새로운 DAO 객체를 생성해서 트랜잭션을 처리해야 하는 문제 존재
- **DAO 클래스의 메서드 파라미터로 Connection 전달**
    - 여러 개의 메소드를 하나의 트랜잭션으로 처리할 수 있고, 매번 새로운 DAO 객체를 생성하지 않아도 되지만, 매개변수로 Connection을 잘못 전달할 수 있다는 문제 존재

**싱글톤 패턴**

- 객체의 인스턴스가 오직 1개만 생성되는 패턴
- 생성자의 접근 제어자가 private → 외부에서 생성자로 객체 생성 불가능, static 메소드인 getInstance() 메소드를 통해 객체 획득
- **장점**
    - 인스턴스가 단 하나이기 때문에 인스턴스를 생성할때 드는 비용이 줄어든다.
    - 싱글톤 인스턴스가 전역으로 사용되는 인스턴스이기 때문에 다른 클래스의 인스턴스들이 접근하여 사용할 수 있고, 데이터 접근이 쉽다.
- **단점**
    - 의존 관계상 클라이언트가 구체 클래스에 의존하게 되어 DIP 원칙을 위반하고, OCP 원칙을 위반할 가능성이 높음
    - private 생성자를 사용하여 자식 클래스 만들기 어려움
    - 싱글톤 패턴을 구현하는 코드 자체가 많이 필요
        - 정적 팩토리 메소드에서 객체 생성 여부를 확인하고, 동시성 문제를 해결하기 위해 synchronized 키워드를 사용해야 함
            
            **정적 팩토리 메소드** : 객체 생성의 역할을 하는 클래스 메서드
            

# CHAPTER 16 커스텀 태그 만들기

### 커스텀 태그

- 원하는 목적에 맞게 작성한 태그
- 사용 이유
    - 스크립트 요소가 많아져 JSP 코드가 복잡해지는 문제를 해결하기 위해
- 장점
    - **재사용** : 한 번 작성한 커스텀 태그는 다른 JSP컨테이너에서도 사용 가능
    - **코드 가독성 향상** : 커스텀 태그를 사용하면 스크립트 코드를 줄일 수 있어 JSP 코드의 가독성을 높일 수 있음
- 태그 파일
    - JSP 문법을 사용해서 커스텀 태그로 동작할 수 있도록 만들어진 소스 코드
    - 웹 컨테이너가 태그 파일을 커스텀 태그 클래스로 변환해줌
    - 태그 파일에서 사용 가능한 기본 객체
        - jspContext : pageContext가 제공하는 getAttr
        - getAttribute(), setAttribute() 메서드를 제공, 속성과 관련한 작업 처리
        - request : JSP 페이지의 request 기본 객체
        - response : JSP 페이지의 response 기본 객체
        - session : JSP 페이지의 session 기본 객체
        - application : JSP 페이지의 application 기본 객체
        - out : JSP 페이지의 out 기본 객체
